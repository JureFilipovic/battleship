(()=>{"use strict";var e={56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},72:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var o={},i=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],d=o[c]||0,p="".concat(c," ").concat(d);o[c]=d+1;var A=t(p),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==A)n[A].references++,n[A].updater(u);else{var h=a(u,r);r.byIndex=s,n.splice(s,0,{identifier:p,updater:h,references:1})}i.push(p)}return i}function a(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=t(o[i]);n[s].references--}for(var l=r(e,a),c=0;c<o.length;c++){var d=t(o[c]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}o=l}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},208:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(354),a=t.n(r),o=t(314),i=t.n(o)()(a());i.push([e.id,"\n.board {\n  display: grid;\n  width: max-content;\n  height: max-content;\n  grid-template-columns: repeat(10, 30px);\n  grid-template-rows: repeat(10, 30px);\n  gap: 2px;\n  margin: 20px;\n  background: #0e1a2b;\n  padding: 5px;\n  border: 2px solid #333;\n  border-radius: 2px;\n}\n\n.cell {\n  width: 30px;\n  height: 30px;\n  background: #1e3a5f;\n  border-radius: 2px;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.cell:hover {\n  background: #2f5d8a;\n}\n\n.cell.ship {\n  background: #666; \n}\n\n.cell.ship:hover {\n    background: lightgray;\n}\n\n.cell.hit {\n  background: crimson;\n}\n.cell.miss {\n  background: lightblue;\n}\n\n#shipyard {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin: 12px 0;\n}\n\n.ship-piece {\n  display: inline-flex;\n  flex-direction: column;       \n  align-items: center;\n  cursor: grab;\n  padding: 4px;\n  user-select: none;\n}\n\n.ship-piece.dragging .rotate-btn {\n  display: none;\n}\n\n.ship-body {\n  display: flex;\n}\n\n.ship-piece.horizontal {\n  flex-direction: row;\n}\n\n.ship-body.vertical {\n  flex-direction: column;\n}\n\n.ship-cell {\n  width: 30px;\n  height: 30px;\n  background: #666;\n  border: 1px solid #333;\n}\n\n.rotate-btn {\n  margin: 0 0 0 4px;\n}\n\n.ship-piece.vertical .rotate-btn {\n  margin: 4px 0 0 0;            /* when vertical: top spacing */\n}\n","",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:";AACA;EACE,aAAa;EACb,kBAAkB;EAClB,mBAAmB;EACnB,uCAAuC;EACvC,oCAAoC;EACpC,QAAQ;EACR,YAAY;EACZ,mBAAmB;EACnB,YAAY;EACZ,sBAAsB;EACtB,kBAAkB;AACpB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,mBAAmB;EACnB,kBAAkB;EAClB,eAAe;EACf,2BAA2B;AAC7B;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;IACI,qBAAqB;AACzB;;AAEA;EACE,mBAAmB;AACrB;AACA;EACE,qBAAqB;AACvB;;AAEA;EACE,aAAa;EACb,eAAe;EACf,QAAQ;EACR,cAAc;AAChB;;AAEA;EACE,oBAAoB;EACpB,sBAAsB;EACtB,mBAAmB;EACnB,YAAY;EACZ,YAAY;EACZ,iBAAiB;AACnB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB,aAAa,+BAA+B;AAC/D",sourcesContent:["\n.board {\n  display: grid;\n  width: max-content;\n  height: max-content;\n  grid-template-columns: repeat(10, 30px);\n  grid-template-rows: repeat(10, 30px);\n  gap: 2px;\n  margin: 20px;\n  background: #0e1a2b;\n  padding: 5px;\n  border: 2px solid #333;\n  border-radius: 2px;\n}\n\n.cell {\n  width: 30px;\n  height: 30px;\n  background: #1e3a5f;\n  border-radius: 2px;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.cell:hover {\n  background: #2f5d8a;\n}\n\n.cell.ship {\n  background: #666; \n}\n\n.cell.ship:hover {\n    background: lightgray;\n}\n\n.cell.hit {\n  background: crimson;\n}\n.cell.miss {\n  background: lightblue;\n}\n\n#shipyard {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin: 12px 0;\n}\n\n.ship-piece {\n  display: inline-flex;\n  flex-direction: column;       \n  align-items: center;\n  cursor: grab;\n  padding: 4px;\n  user-select: none;\n}\n\n.ship-piece.dragging .rotate-btn {\n  display: none;\n}\n\n.ship-body {\n  display: flex;\n}\n\n.ship-piece.horizontal {\n  flex-direction: row;\n}\n\n.ship-body.vertical {\n  flex-direction: column;\n}\n\n.ship-cell {\n  width: 30px;\n  height: 30px;\n  background: #666;\n  border: 1px solid #333;\n}\n\n.rotate-btn {\n  margin: 0 0 0 4px;\n}\n\n.ship-piece.vertical .rotate-btn {\n  margin: 4px 0 0 0;            /* when vertical: top spacing */\n}\n"],sourceRoot:""}]);const s=i},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);r&&i[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),n.push(d))}},n}},354:e=>{e.exports=function(e){var n=e[1],t=e[3];if(!t)return n;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(a," */");return[n].concat([o]).join("\n")}return[n].join("\n")}},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},659:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var a=void 0!==t.layer;a&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,a&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var o=n[r]={id:r,exports:{}};return e[r](o,o.exports,t),o.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0;var r=t(72),a=t.n(r),o=t(825),i=t.n(o),s=t(659),l=t.n(s),c=t(56),d=t.n(c),p=t(540),A=t.n(p),u=t(113),h=t.n(u),g=t(208),m={};function f(e){let n=0;return{getLength:()=>e,getHits:()=>n,hit:()=>n<e&&(n+=1,!0),isSunk:()=>n===e}}function B(e="user"){const n=function(){const e=Array.from({length:10},(()=>Array(10).fill(null))),n=[];return{getBoard:()=>e.map((e=>[...e])),getShips:()=>n,placeShip:(t,r,a,o)=>{const i=a.getLength();if("horizontal"===o){if(r+i>10)return!1}else if(t+i>10)return!1;const s=(n,t)=>{for(let r=-1;r<=1;r++)for(let a=-1;a<=1;a++){const o=n+r,i=t+a;if(o>=0&&o<10&&i>=0&&i<10&&null!==e[o][i])return!1}return!0};for(let e=0;e<i;e++)if(!s("vertical"===o?t+e:t,"horizontal"===o?r+e:r))return!1;for(let n=0;n<i;n++){const i="horizontal"===o?r+n:r;e["vertical"===o?t+n:t][i]={ship:a,hit:!1}}return n.includes(a)||n.push(a),!0},receiveAttack:(n,t)=>{if(e[n][t]){if("Miss"===e[n][t]||!0===e[n][t].hit)return"Already attacked";const r=e[n][t].ship;return e[n][t].hit=!0,r.hit(),"hit"}return e[n][t]="Miss","miss"},allShipsSunk:()=>n.every((e=>e.isSunk())),markForbidden:n=>{n.forEach((([n,t])=>{for(let r=-1;r<=1;r++)for(let a=-1;a<=1;a++){const o=n+r,i=t+a;o>=0&&o<10&&i>=0&&i<10&&null===e[o][i]&&(e[o][i]="forbidden")}}))}}}();let t,r=[];const a=()=>{const e=[2,3,3,4,5];for(let n=0;n<5;n++)r.push(f(e[n]))};return{getType:()=>e,getOwnBoard:()=>n,getShips:()=>r,setEnemyBoard:e=>{t=e},getEnemyBoard:()=>t,attack:(e,n)=>t.receiveAttack(e,n),randomlyPlaceShips:()=>{a();const e=["horizontal","vertical"];r.forEach((t=>{let r=!1;for(;!r;){const a=Math.floor(10*Math.random()),o=Math.floor(10*Math.random()),i=e[Math.floor(2*Math.random())];r=n.placeShip(a,o,t,i)}}))},createShips:a}}function E(){const e=B("user"),n=B("computer"),t=function(){let e,n=0;const t=(e,n,t=!0)=>{const r=document.querySelector(n);r.innerHTML="";for(let n=0;n<10;n++)for(let a=0;a<10;a++){const o=document.createElement("div");o.classList.add("cell"),o.dataset.row=n,o.dataset.col=a;const i=e[n][a];"Miss"===i?o.classList.add("miss"):i&&!0===i.hit&&o.classList.add("hit"),t&&i?.ship&&o.classList.add("ship"),r.appendChild(o)}};return{renderBoard:t,renderShipyard:function(r){const a=document.querySelector("#shipyard");a.innerHTML="",n=0;let o=null;r.forEach((e=>{const n=document.createElement("div");n.className="ship-piece horizontal",n.draggable=!0,n.shipObj=e,n.dataset.orientation="horizontal";const t=document.createElement("div");t.className="ship-body";for(let n=0;n<e.getLength();n++){const e=document.createElement("div");e.className="ship-cell",t.appendChild(e)}n.appendChild(t);const r=document.createElement("button");r.type="button",r.className="rotate-btn",r.textContent="⤾",r.addEventListener("click",(e=>{e.stopPropagation();const r="horizontal"===n.dataset.orientation?"vertical":"horizontal";n.dataset.orientation=r,n.dataset.orientation=r,n.classList.toggle("horizontal","horizontal"===r),n.classList.toggle("vertical","vertical"===r),t.classList.toggle("vertical","vertical"===r)})),n.appendChild(r),a.appendChild(n)})),a.addEventListener("dragstart",(e=>{const n=e.target.closest(".ship-piece");n&&(o=n,n.classList.add("dragging"))})),a.addEventListener("dragend",(()=>{o&&(o.classList.remove("dragging"),o=null)}));const i=document.querySelector(".player-board");i.addEventListener("dragover",(e=>e.preventDefault())),i.addEventListener("drop",(a=>{if(a.preventDefault(),!o)return;const i=a.target.closest(".cell");if(!i)return;const s=+i.dataset.row,l=+i.dataset.col,c=o.dataset.orientation||"horizontal";window.game.placePlayerShip(o.shipObj,s,l,c)?(o.remove(),n++,t(window.game.board.getBoard(),".player-board",!0),n===r.length&&"function"==typeof e&&e()):(i.classList.add("invalid"),setTimeout((()=>i.classList.remove("invalid")),300))}))},bindCellClicks:(e,n)=>{document.querySelectorAll(`${e} .cell`).forEach((e=>{e.addEventListener("click",(()=>{if(e.classList.contains("disabled"))return;const t=parseInt(e.dataset.row,10),r=parseInt(e.dataset.col,10);n(t,r)}))}))},updateCell:(e,n,t,r)=>{const a=document.querySelector(`${e} .cell[data-row="${n}"][data-col="${t}"]`);a&&(a.classList.remove("hit","miss"),"hit"===r&&a.classList.add("hit"),"miss"===r&&a.classList.add("miss"))},bindToggleComputerBoard:e=>{document.getElementById("show-hide-btn").addEventListener("click",e)},endGame:e=>alert(e),set onAllShipsPlaced(n){e=n}}}();let r=e,a=[],o=[],i=!1;const s=()=>{i=!i,t.renderBoard(n.getOwnBoard().getBoard(),".enemy-board",i),t.bindCellClicks(".enemy-board",l)},l=(a,o)=>{if(r!==e)return;const i=e.attack(a,o);if("Already attacked"!==i){if(t.updateCell(".enemy-board",a,o,i),n.getOwnBoard().allShipsSunk())return alert("You win!"),void document.querySelectorAll(".cell").forEach((e=>e.classList.add("disabled")));r=n,c()}},c=()=>{let i,s,l;const c=n.getEnemyBoard().getBoard(),d=(e,n)=>{const t=c[e][n];return null===t||t.ship&&!t.hit},p=(e,t)=>{n.getEnemyBoard().getBoard()[e][t].ship.isSunk()?(n.getEnemyBoard().markForbidden(a),a.length=0,o.length=0):(a.push([e,t]),((e,t)=>{const r=n.getEnemyBoard().getBoard(),i=[[e,t-1],[e,t+1],[e-1,t],[e+1,t]],s=(e,n)=>{if(!((e,n)=>e>=0&&e<10&&n>=0&&n<10)(e,n))return;const t=r[e][n];(null===t||t.ship&&!1===t.hit)&&!o.some((([t,r])=>t===e&&r===n))&&o.push([e,n])};if(1===a.length)i.forEach((([e,n])=>s(e,n)));else{let[e,n]=a[0],[t,r]=a[1];if(e===t){const n=a.map((([e,n])=>n)),t=Math.min(...n),r=Math.max(...n);o.length=0,s(e,t-1),s(e,r+1)}else if(n===r){const e=a.map((([e,n])=>e)),t=Math.min(...e),r=Math.max(...e);o.length=0,s(t-1,n),s(r+1,n)}}})(e,t))};if(0===o.length){do{i=Math.floor(10*Math.random()),s=Math.floor(10*Math.random())}while(!d(i,s));l=n.attack(i,s),"hit"===l&&p(i,s)}else[i,s]=o.shift(),l=n.attack(i,s),"hit"===l&&p(i,s);if(t.updateCell(".player-board",i,s,l),e.getOwnBoard().allShipsSunk())return alert("Computer wins!"),void document.querySelectorAll(".cell").forEach((e=>e.classList.add("disabled")));r=e};return{init:()=>{n.randomlyPlaceShips(),n.setEnemyBoard(e.getOwnBoard()),e.createShips(),t.renderBoard(e.getOwnBoard().getBoard(),".player-board",!0),t.renderShipyard(e.getShips()),t.onAllShipsPlaced=()=>{e.setEnemyBoard(n.getOwnBoard()),t.renderBoard(n.getOwnBoard().getBoard(),".enemy-board",i),t.bindCellClicks(".enemy-board",l),t.bindToggleComputerBoard(s)}},placePlayerShip:(n,t,r,a)=>e.getOwnBoard().placeShip(t,r,n,a),toggleComputerBoardVisible:s,board:e.getOwnBoard()}}m.styleTagTransform=h(),m.setAttributes=d(),m.insert=l().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=A(),a()(g.A,m),g.A&&g.A.locals&&g.A.locals,document.addEventListener("DOMContentLoaded",(()=>{const e=E();window.game=e,e.init()}))})();
//# sourceMappingURL=main.js.map